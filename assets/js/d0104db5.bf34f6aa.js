"use strict";(globalThis.webpackChunkweb_apuntes=globalThis.webpackChunkweb_apuntes||[]).push([[51],{1470:(e,n,r)=>{r.d(n,{A:()=>W});var i=r(6540),s=r(4164),a=r(7559),t=r(3104),o=r(6347),l=r(205),d=r(7485),c=r(1682),u=r(679);function h(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,i.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:r,default:i}})=>({value:e,label:n,attributes:r,default:i}))}(r);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function b({queryString:e=!1,groupId:n}){const r=(0,o.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(s),(0,i.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})},[s,r])]}function v(e){const{defaultValue:n,queryString:r=!1,groupId:s}=e,a=p(e),[t,o]=(0,i.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a})),[d,c]=b({queryString:r,groupId:s}),[h,v]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,s]=(0,u.Dv)(n);return[r,(0,i.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),x=(()=>{const e=d??h;return m({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{x&&o(x)},[x]);return{selectedValue:t,selectValue:(0,i.useCallback)(e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),c(e),v(e)},[c,v,a]),tabValues:a}}var x=r(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var S=r(4848);function g({className:e,block:n,selectedValue:r,selectValue:i,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,t.a_)(),d=e=>{const n=e.currentTarget,s=o.indexOf(n),t=a[s].value;t!==r&&(l(n),i(t))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,S.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:i})=>(0,S.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{o.push(e)},onKeyDown:c,onClick:d,...i,className:(0,s.A)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function j({lazy:e,children:n,selectedValue:r}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===r);return e?(0,i.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,S.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function P(e){const n=v(e);return(0,S.jsxs)("div",{className:(0,s.A)(a.G.tabs.container,"tabs-container",f.tabList),children:[(0,S.jsx)(g,{...n,...e}),(0,S.jsx)(j,{...n,...e})]})}function W(e){const n=(0,x.A)();return(0,S.jsx)(P,{...e,children:h(e.children)},String(n))}},8424:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"esp32/wifi_lib","title":"Libreria WiFi.h","description":"Funciones esenciales de la librer\xeda WiFi.h para ESP32","source":"@site/docs/08_esp32/wifi_lib.mdx","sourceDirName":"08_esp32","slug":"/esp32/wifi_lib","permalink":"/docs/esp32/wifi_lib","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1769978918000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Libreria WiFi.h","description":"Funciones esenciales de la librer\xeda WiFi.h para ESP32"},"sidebar":"tutorialSidebar","previous":{"title":"Particiones de Memoria","permalink":"/docs/esp32/partitions"},"next":{"title":"Libreria WiFiClientSecure.h","permalink":"/docs/esp32/get_post_https"}}');var s=r(4848),a=r(8453),t=r(1470),o=r(9365);const l={sidebar_position:3,title:"Libreria WiFi.h",description:"Funciones esenciales de la librer\xeda WiFi.h para ESP32"},d="Libreria WiFi.h",c={},u=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"Modos de Conexi\xf3n",id:"modos-de-conexi\xf3n",level:2}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"libreria-wifih",children:"Libreria WiFi.h"})}),"\n","\n",(0,s.jsx)(n.h2,{id:"introducci\xf3n",children:"Introducci\xf3n"}),"\n",(0,s.jsxs)(n.p,{children:["La librer\xeda ",(0,s.jsx)(n.code,{children:"WiFi.h"})," permite configurar el ESP32 en diferentes modos de operaci\xf3n. Adem\xe1s dispone de algunas funciones para obtener detalles de la conexi\xf3n y gestionar eventos relacionados con la conectividad Wi-Fi."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Estados y Valores"})})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.RSSI()"}),": Devuelve la intensidad de la se\xf1al de la red Wi-Fi a la que est\xe1 conectado el ESP32. El valor se expresa en dBm."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.macAddress()"}),": Obtiene la direcci\xf3n MAC del ESP32."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'WiFi.setHostname("MiSensor")'}),": Establece el nombre del host para el ESP32 en la red."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.setAutoReconnect(bool)"}),": Habilita la reconexi\xf3n autom\xe1tica a la red Wi-Fi en caso de p\xe9rdida de conexi\xf3n."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Funciones de Gesti\xf3n de Energ\xeda"})})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.setSleep(bool)"}),": Habilita o deshabilita el modo de ahorro de energ\xeda Wi-Fi."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.setTxPower(WIFI_POWER_19_5dBm)"}),": Configura la potencia de transmisi\xf3n Wi-Fi. Los valores van desde ",(0,s.jsx)(n.code,{children:"WIFI_POWER_8dBm"})," hasta ",(0,s.jsx)(n.code,{children:"WIFI_POWER_19_5dBm"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Gestion de IP"})})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.localIP()"}),": Obtiene la direcci\xf3n IP del ESP32 cuando est\xe1 en modo Station."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.softAPIP()"}),": Obtiene la direcci\xf3n IP del ESP32 cuando est\xe1 en modo Access Point."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Informaci\xf3n de Red y Diagn\xf3stico"})})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.SSID()"}),": Devuelve el SSID de la red Wi-Fi a la que est\xe1 conectado el ESP32."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.status()"}),": Devuelve el estado actual de la conexi\xf3n Wi-Fi. Los posibles valores incluyen ",(0,s.jsx)(n.code,{children:"WL_CONNECTED"}),", ",(0,s.jsx)(n.code,{children:"WL_NO_SSID_AVAIL"}),", ",(0,s.jsx)(n.code,{children:"WL_CONNECT_FAILED"}),", entre otros."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.BSSIDstr()"}),": Devuelve la direcci\xf3n MAC del punto de acceso al que est\xe1 conectado el ESP32 en formato de cadena."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"WiFi.softAPgetStationNum()"}),": Devuelve el n\xfamero de dispositivos conectados al ESP32 cuando est\xe1 en modo Access Point."]}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h2,{id:"modos-de-conexi\xf3n",children:"Modos de Conexi\xf3n"}),"\n",(0,s.jsxs)(t.A,{children:[(0,s.jsxs)(o.A,{value:"station",label:"Station",default:!0,children:[(0,s.jsxs)(n.p,{children:["El modo ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"estaci\xf3n"})})," permite al ESP32 conectarse a una red Wi-Fi existente como un cliente. Esto es \xfatil para dispositivos que necesitan acceder a Internet o comunicarse con otros dispositivos en la misma red."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'#include <Arduino.h>\r\n#include <WiFi.h>\r\n\r\nvoid setup() {\r\n    Serial.begin(115200);\r\n    delay(3000);\r\n\r\n    WiFi.mode(WIFI_STA);\r\n    WiFi.begin("SSID", "PASSWORD");\r\n\r\n    Serial.println("Conectando a la red Wi-Fi...");\r\n    while (WiFi.status() != WL_CONNECTED) {\r\n        delay(10);\r\n    }\r\n    Serial.println("Conectado a la red Wi-Fi");\r\n    Serial.print("Direcci\xf3n IP: ");\r\n    Serial.println(WiFi.localIP());\r\n}\r\n\r\nvoid loop() {}\n'})})]}),(0,s.jsxs)(o.A,{value:"ap",label:"Access Point",default:!0,children:[(0,s.jsxs)(n.p,{children:["El modo ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"AP"})})," permite al ESP32 crear su propia red Wi-Fi a la que otros dispositivos pueden conectarse. Esto es \xfatil para aplicaciones donde el ESP32 act\xfaa como un punto de acceso independiente."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'#include <Arduino.h>\r\n#include <DNSServer.h>\r\n#include <WebServer.h>\r\n#include <WiFi.h>\r\n\r\nIPAddress local_IP(192, 168, 4, 22);\r\nIPAddress gateway(192, 168, 4, 9);\r\nIPAddress subnet(255, 255, 255, 0);\r\n\r\nDNSServer dnsServer;\r\nWebServer server(80);\r\n\r\nvoid handleRoot() { server.send(200, "text/html", "<h1>Conectado al ESP32-C3!</h1><p>El DNS Cautivo funciona correctamente.</p>"); }\r\nvoid handle404() { server.send(200, "text/html", "<h1>Portal Cautivo</h1><p>Redirigido autom\xe1ticamente.</p>"); }\r\n\r\nvoid setup() {\r\n    Serial.begin(115200);\r\n    delay(3000);\r\n\r\n    WiFi.mode(WIFI_AP);\r\n    WiFi.softAPConfig(local_IP, gateway, subnet);\r\n    WiFi.softAP("TestESP32", "12345678");\r\n\r\n    dnsServer.start(53, "*", local_IP);\r\n    server.on("/", handleRoot);\r\n    server.onNotFound(handle404);\r\n\r\n    server.begin();\r\n}\r\n\r\nvoid loop() {\r\n    dnsServer.processNextRequest();\r\n    server.handleClient();\r\n}\n'})}),(0,s.jsx)(n.p,{children:"Es importante notar que se utiliza un servidor DNS y un servidor web, esto se implementa para crear un portal cautivo que redirige autom\xe1ticamente a los usuarios conectados al ESP32. El fin es lograr que los dispositivos conectados no rechazen la red Wi-Fi por no tener acceso a Internet."})]}),(0,s.jsxs)(o.A,{value:"station_and_ap",label:"Station + AP",default:!0,children:[(0,s.jsx)(n.p,{children:"El modo dual permite al ESP32 funcionar simult\xe1neamente como estaci\xf3n y punto de acceso. Esto es \xfatil para aplicaciones que requieren conectividad a una red existente mientras permiten que otros dispositivos se conecten al ESP32."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'  #include <Arduino.h>\r\n  #include <DNSServer.h>\r\n  #include <WebServer.h>\r\n  #include <WiFi.h>\r\n\r\n  IPAddress local_IP(192, 168, 4, 22);\r\n  IPAddress gateway(192, 168, 4, 9);\r\n  IPAddress subnet(255, 255, 255, 0);\r\n\r\n  DNSServer dnsServer;\r\n  WebServer server(80);\r\n\r\n  unsigned long startTime;\r\n\r\n  const char* host_ssid = "Flia-Herrera";\r\n  const char* host_pass = "oceano2021";\r\n\r\n  const char* ap_ssid = "ESP32-C3-AP";\r\n  const char* ap_pass = "12345678";\r\n\r\n  /**\r\n  * Web HTML de la p\xe1gina principal\r\n  * Muestra el estado de la conexi\xf3n WiFi y el tiempo de actividad del dispositivo.\r\n  */\r\n  void handleRoot() {\r\n      char html[800];\r\n      unsigned long uptime = millis() / 1000;\r\n      bool connected = WiFi.status() == WL_CONNECTED;\r\n\r\n      snprintf(html, sizeof(html),\r\n              "<!DOCTYPE html><html><head><meta charset=\'utf-8\'>"\r\n              "<meta name=\'viewport\' content=\'width=device-width, initial-scale=1\'>"\r\n              "<style>body{font-family:sans-serif;text-align:center;background:#f4f4f4;margin:0;}"\r\n              ".card{background:#fff;padding:20px;border-radius:10px;display:inline-block;margin-top:50px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}"\r\n              "hr{border:0;border-top:1px solid #eee;margin:15px 0;}</style></head>"\r\n              "<body><div class=\'card\'><h2>ESP32-C3 Status</h2>"\r\n              "<p><b>Red:</b> %s</p>"\r\n              "<p style=\'color:%s\'><b>Estado:</b> %s</p>"\r\n              "<p><b>Se\xf1al:</b> %d dBm</p>"\r\n              "<hr>"\r\n              "<p><b>Uptime:</b> %lu s | <b>Clientes AP:</b> %d</p>"\r\n              "</div></body></html>",\r\n              host_ssid, connected ? "green" : "red", connected ? "CONECTADO" : "DESCONECTADO", WiFi.RSSI(), uptime, WiFi.softAPgetStationNum());\r\n\r\n      server.send(200, "text/html", html);\r\n  }\r\n\r\n  /**\r\n  * Maneja las solicitudes no encontradas (404)\r\n  */\r\n  void handle404() { server.send(200, "text/html", "<h1>Portal Cautivo</h1><p>Redirigido autom\xe1ticamente.</p>"); }\r\n\r\n  void setup() {\r\n      Serial.begin(115200);\r\n      delay(3000);\r\n      startTime = millis();\r\n\r\n      // Modo AP + STA\r\n      WiFi.mode(WIFI_AP_STA);\r\n\r\n      // Configura el AP\r\n      WiFi.softAPConfig(local_IP, gateway, subnet);\r\n      WiFi.softAP(ap_ssid, ap_pass);\r\n\r\n      // Conecta a la red WiFi del hogar\r\n      WiFi.begin(host_ssid, host_pass);\r\n\r\n      // Configura el servidor DNS\r\n      dnsServer.start(53, "*", local_IP);\r\n\r\n      // Configura el servidor web\r\n      server.on("/", handleRoot);\r\n      server.onNotFound(handle404);\r\n      server.begin();\r\n  }\r\n\r\n  void loop() {\r\n      // Procesa las solicitudes DNS y HTTP\r\n      dnsServer.processNextRequest();\r\n      server.handleClient();\r\n  }\n'})}),(0,s.jsx)(n.p,{children:"En este ejemplo, el ESP32 se conecta a una red Wi-Fi existente mientras crea su propia red Wi-Fi a la que otros dispositivos pueden conectarse. Adem\xe1s, se implementa un portal cautivo similar al del modo AP."})]})]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var i=r(6540);const s={},a=i.createContext(s);function t(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:n},e.children)}},9365:(e,n,r)=>{r.d(n,{A:()=>t});r(6540);var i=r(4164);const s={tabItem:"tabItem_Ymn6"};var a=r(4848);function t({children:e,hidden:n,className:r}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.A)(s.tabItem,r),hidden:n,children:e})}}}]);