<!doctype html>
<html lang="es" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-php/sqlite" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">SQLite en PHP | Apuntes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://apuntes.christianherrera.com.ar/docs/php/sqlite"><meta data-rh="true" property="og:locale" content="es"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SQLite en PHP | Apuntes"><meta data-rh="true" name="description" content="Funciones y técnicas para el hashing seguro de contraseñas en PHP."><meta data-rh="true" property="og:description" content="Funciones y técnicas para el hashing seguro de contraseñas en PHP."><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://apuntes.christianherrera.com.ar/docs/php/sqlite"><link data-rh="true" rel="alternate" href="https://apuntes.christianherrera.com.ar/docs/php/sqlite" hreflang="es"><link data-rh="true" rel="alternate" href="https://apuntes.christianherrera.com.ar/docs/php/sqlite" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"SQLite en PHP","item":"https://apuntes.christianherrera.com.ar/docs/php/sqlite"}]}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ed559abb.css">
<script src="/assets/js/runtime~main.f83a0418.js" defer="defer"></script>
<script src="/assets/js/main.09fa1266.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><nav aria-label="Principal" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Alternar barra lateral" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Apuntes</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Bunker de Notas</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/christian-herrera" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra lateral de Documentos" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Introducción" class="linkLabel_WmDU">Introducción</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/quarto/instalacion"><span title="Presentaciones Quarto" class="categoryLinkLabel_W154">Presentaciones Quarto</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/react/instalacion"><span title="React JS" class="categoryLinkLabel_W154">React JS</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/php/passwords"><span title="PHP" class="categoryLinkLabel_W154">PHP</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/php/passwords"><span title="Hashing de Claves" class="linkLabel_WmDU">Hashing de Claves</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/php/variables"><span title="Variables" class="linkLabel_WmDU">Variables</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/php/sqlite"><span title="SQLite en PHP" class="linkLabel_WmDU">SQLite en PHP</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Rastro de navegación"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Página de Inicio" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">PHP</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">SQLite en PHP</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">En esta página</button></div><div class="theme-doc-markdown markdown">
<header><h1>SQLite en PHP</h1></header>
<p>SQLite es una base de datos ligera y embebida que no requiere un servidor separado para funcionar. En PHP, se puede utilizar SQLite a través de la extensión PDO (PHP Data Objects), que proporciona una interfaz uniforme para acceder a diferentes bases de datos.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="crear-base-de-datos">Crear base de datos<a href="#crear-base-de-datos" class="hash-link" aria-label="Enlace directo al Crear base de datos" title="Enlace directo al Crear base de datos" translate="no">​</a></h2>
<p>SQLite crea automaticamente el archivo cuando la conexión se abre.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">new</span><span class="token plain"> </span><span class="token class-name" style="color:#d8a657">PDO</span><span class="token punctuation">(</span><span class="token string single-quoted-string" style="color:#89b482">&#x27;sqlite:&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">.</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">__DIR__</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">.</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#89b482">&#x27;/database.db&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token comment" style="color:#a89984">// Opcional: activar errores como excepciones</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">setAttribute</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">ATTR_ERRMODE</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">ERRMODE_EXCEPTION</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">exec</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;</span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token string double-quoted-string" style="color:#89b482">    CREATE TABLE IF NOT EXISTS users (</span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token string double-quoted-string" style="color:#89b482">        id INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token string double-quoted-string" style="color:#89b482">        username TEXT NOT NULL UNIQUE,</span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token string double-quoted-string" style="color:#89b482">        password TEXT NOT NULL</span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token string double-quoted-string" style="color:#89b482">    )</span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token string double-quoted-string" style="color:#89b482">&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token keyword" style="color:#ea6962">echo</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:#89b482">&quot;Base de datos y tabla &#x27;users&#x27; creadas exitosamente.&quot;</span><span class="token punctuation">;</span><br></span></code></pre></div></div>
<hr style="margin-top:40px">
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="patrón-singleton">Patrón Singleton<a href="#patrón-singleton" class="hash-link" aria-label="Enlace directo al Patrón Singleton" title="Enlace directo al Patrón Singleton" translate="no">​</a></h2>
<p>El patrón Singleton permite asegurar que exista una única instancia de un recurso durante toda la ejecución del programa.
En el caso de PHP, se utiliza comúnmente para mantener una sola conexión PDO a la base de datos, evitando crear múltiples conexiones innecesarias.</p>
<p>Para entender su funcionamiento, es importante distinguir entre:</p>
<ul>
<li class=""><code>self</code>: referencia a la clase, no a un objeto. Se usa para acceder a métodos o propiedades estáticas.</li>
<li class=""><code>$this</code>: referencia al objeto instanciado. Solo existe dentro de métodos no estáticos.</li>
</ul>
<p>Como el patrón Singleton no trabaja con objetos instanciados manualmente (no se usa new), sino con una instancia global controlada por la clase, se utiliza self para acceder a la propiedad que almacenará esa única instancia.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockTitle_OeMC">Database.php</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token keyword" style="color:#ea6962">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#d8a657">Database</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token comment" style="color:#a89984">// Instancia única (Singleton)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">private</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">static</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">null</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token comment" style="color:#a89984">// Constructor privado: evita que se pueda hacer &quot;new Database()&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">private</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d8a657">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token comment" style="color:#a89984">// Método estático que devuelve siempre la misma conexión PDO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">static</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d8a657">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token keyword" style="color:#ea6962">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword static-context" style="color:#ea6962">self</span><span class="token operator" style="color:#a89984">::</span><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">===</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">null</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token variable" style="color:#ea6962">$pathDB</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">__DIR__</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">.</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:#89b482">&quot;/database.db&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token keyword static-context" style="color:#ea6962">self</span><span class="token operator" style="color:#a89984">::</span><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">new</span><span class="token plain"> </span><span class="token class-name" style="color:#d8a657">PDO</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;sqlite:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">.</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$pathDB</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token keyword static-context" style="color:#ea6962">self</span><span class="token operator" style="color:#a89984">::</span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">setAttribute</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">ATTR_ERRMODE</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">ERRMODE_EXCEPTION</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token keyword static-context" style="color:#ea6962">self</span><span class="token operator" style="color:#a89984">::</span><span class="token variable" style="color:#ea6962">$db</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token comment" style="color:#a89984">// Ejemplo de método que sua la conexion Singleton</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">public</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d8a657">getUser</span><span class="token punctuation">(</span><span class="token keyword type-hint" style="color:#ea6962">string</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$email</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token keyword static-context" style="color:#ea6962">self</span><span class="token operator" style="color:#a89984">::</span><span class="token function" style="color:#d8a657">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token keyword" style="color:#ea6962">try</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;SELECT . . .&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string double-quoted-string" style="color:#89b482">&quot;:email&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$email</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token variable" style="color:#ea6962">$user</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">fetch</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$user</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant boolean" style="color:#ea6962">false</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">catch</span><span class="token punctuation">(</span><span class="token class-name" style="color:#d8a657">PDOException</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">            </span><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">null</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// Error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Entonces...</div><div class="admonitionContent_BuS1"><ul>
<li class="">La primera ves que se llama a <code>Database::initDB()</code>, se crea la conexión PDO y se almacena en <code>self::$db</code>.</li>
<li class="">En llamadas posteriores, se devuelve la misma instancia almacenada en <code>self::$db</code>, evitando crear nuevas conexiones.</li>
<li class="">Durante todo el script, solo existirá una única conexión a la base de datos gestionada por la clase <code>Database</code>.</li>
</ul><p>La forma de utilizar esto es simplemente:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockTitle_OeMC">index.php</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token keyword" style="color:#ea6962">require_once</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">__DIR__</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">.</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#89b482">&#x27;/Database.php&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$rows</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">Database</span><span class="token operator" style="color:#a89984">::</span><span class="token function" style="color:#d8a657">getUser</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;chris@dominio.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre></div></div></div></div>
<hr style="margin-top:40px">
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="métodos-útiles">Métodos Útiles<a href="#métodos-útiles" class="hash-link" aria-label="Enlace directo al Métodos Útiles" title="Enlace directo al Métodos Útiles" translate="no">​</a></h2>
<p>Se listan a continuación algunos métodos útiles para trabajar con SQLite en PHP utilizando PDO.</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Configuraciones</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Ejecuciones</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Obtención de datos</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Contar Resultados</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p><code>setAttribute()</code> permite configurar parámetros de la conexión PDO.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token comment" style="color:#a89984">// Configura:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token comment" style="color:#a89984">// - PDO puede lanzar excepciones en caso de error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token comment" style="color:#a89984">// - Devuelve arrays asociativos por defecto, ([&#x27;columna&#x27; =&gt; valor, ...])</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$pdo</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">setAttribute</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">ATTR_ERRMODE</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">ERRMODE_EXCEPTION</span><span class="token punctuation">)</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><code>prepare()</code> simplemente prepara una sentencia SQL para su ejecución posterior. Luego <code>execute()</code> ejecuta la sentencia preparada completando los parámetros si es necesario.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$stmt</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$pdo</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">prepare</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;INSERT INTO users (username, password) VALUES (:username, :password)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#89b482">&#x27;:username&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#89b482">&#x27;usuario1&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#89b482">&#x27;:password&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d8a657">password_hash</span><span class="token punctuation">(</span><span class="token string single-quoted-string" style="color:#89b482">&#x27;mi_contraseña&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">PASSWORD_DEFAULT</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre></div></div><p>Otra opción es usar <code>query()</code>para ejecutar una sentencia SQL directamente sin parámetros.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$stmt</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$pdo</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;SELECT * FROM users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><code>fetch()</code> obtiene solo <em><strong>una fila</strong></em> de la consulta ejecutada. Si no hay más filas, devuelve <code>false</code>.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$user</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">fetch</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// [&#x27;id&#x27; =&gt; 1, &#x27;email&#x27; =&gt; &#x27;test@test.com&#x27;])</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$user</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">fetch</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">FETCH_OBJ</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">    </span><span class="token comment" style="color:#a89984">// $user-&gt;id, $user-&gt;email</span><br></span></code></pre></div></div><p>Para obtener <em><strong>todas las filas</strong></em> de una consulta, se usa <code>fetchAll()</code> el cual devuelve un array que dentro contiene un array por cada fila obtenida. Si no encuentra ninguna fila, entonces devuelve un array vacío <code>[]</code>.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$users</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">fetchAll</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// [ [&#x27;id&#x27; =&gt; 1, &#x27;email&#x27; =&gt; &#x27;test@test.com&#x27;], ... ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$users</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">fetchAll</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">FETCH_OBJ</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">    </span><span class="token comment" style="color:#a89984">// [ $user1, $user2, ... ]</span><br></span></code></pre></div></div><p>Pero puede consumir mucha memoria si la tabla es grande.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Solo para las consultas <code>INSERT</code>, <code>UPDATE</code> o <code>DELETE</code>, se puede hacer uso de <code>rowCount()</code> para obtener el número de filas <em>afectadas</em>:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#d3869b">0</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// True si se afectó al menos una fila</span><br></span></code></pre></div></div><p>Cuando se realiza un <code>INSERT</code>, se puede obtener el ID de la última fila insertada con <code>lastInsertId()</code>:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$lastId</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$pdo</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">lastInsertId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre></div></div></div></div></div>
<br>
<br>
<p>Entonces, con estas funciones se pueden crear algunos métodos básicos para cada operacion:</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">SELECT</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">INSERT</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">UPDATE</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Utilizando parámetros:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">Database</span><span class="token operator" style="color:#a89984">::</span><span class="token function" style="color:#d8a657">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">prepare</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;SELECT * FROM users WHERE email = :email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string double-quoted-string" style="color:#89b482">&quot;:email&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$email</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$user</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">fetch</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment" style="color:#a89984">// [&quot;id&quot; =&gt; 1, &quot;email&quot; =&gt; &quot;test@test.com&quot;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">                                        </span><span class="token comment" style="color:#a89984">// `false` si no existe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token keyword" style="color:#ea6962">if</span><span class="token punctuation">(</span><span class="token operator" style="color:#a89984">!</span><span class="token variable" style="color:#ea6962">$user</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token comment" style="color:#a89984">/* No encontrado */</span><span class="token punctuation">}</span><br></span></code></pre></div></div><p>Y si no hay parámetrso se simplifica:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">Database</span><span class="token operator" style="color:#a89984">::</span><span class="token function" style="color:#d8a657">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;SELECT id, email FROM users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token variable" style="color:#ea6962">$users</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">fetchAll</span><span class="token punctuation">(</span><span class="token class-name static-context" style="color:#d8a657">PDO</span><span class="token operator" style="color:#a89984">::</span><span class="token constant" style="color:#d8a657">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment" style="color:#a89984">// -&gt; [ [&quot;id&quot; =&gt; 1, &quot;email&quot; =&gt; &quot;test@test.com&quot;], ... ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">                                            </span><span class="token comment" style="color:#a89984">// -&gt; [] si no hay usuarios</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token keyword" style="color:#ea6962">if</span><span class="token punctuation">(</span><span class="token keyword" style="color:#ea6962">empty</span><span class="token punctuation">(</span><span class="token variable" style="color:#ea6962">$users</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token comment" style="color:#a89984">/* No hay usuarios */</span><span class="token plain"> </span><span class="token punctuation">}</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>La forma de hacer un <em>insert</em> seguro es con:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">Database</span><span class="token operator" style="color:#a89984">::</span><span class="token function" style="color:#d8a657">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token keyword" style="color:#ea6962">try</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">prepare</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;INSERT INTO users (email, password) VALUES (:email, :password)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token string double-quoted-string" style="color:#89b482">&quot;:email&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$email</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token string double-quoted-string" style="color:#89b482">&quot;:password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d8a657">password_hash</span><span class="token punctuation">(</span><span class="token variable" style="color:#ea6962">$password</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">PASSWORD_DEFAULT</span><span class="token punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">lastInsertId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// -&gt; Devuelve el ID del nuevo usuario</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">catch</span><span class="token punctuation">(</span><span class="token class-name" style="color:#d8a657">PDOException</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">null</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// -&gt; Error (ej: email ya existe)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Los <em>updates</em> se realizan de forma similar:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#ebdbb2;--prism-background-color:#292828"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#ebdbb2;background-color:#292828"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ebdbb2"><span class="token variable" style="color:#ea6962">$db</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#d8a657">Database</span><span class="token operator" style="color:#a89984">::</span><span class="token function" style="color:#d8a657">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token keyword" style="color:#ea6962">try</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$db</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">prepare</span><span class="token punctuation">(</span><span class="token string double-quoted-string" style="color:#89b482">&quot;UPDATE users SET password = :password WHERE email = :email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">execute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token string double-quoted-string" style="color:#89b482">&quot;:password&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d8a657">password_hash</span><span class="token punctuation">(</span><span class="token variable" style="color:#ea6962">$newPassword</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">PASSWORD_DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">        </span><span class="token string double-quoted-string" style="color:#89b482">&quot;:email&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$email</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$stmt</span><span class="token operator" style="color:#a89984">-&gt;</span><span class="token function" style="color:#d8a657">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#a89984">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#d3869b">0</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// -&gt; True si se actualizó al menos un usuario</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ea6962">catch</span><span class="token punctuation">(</span><span class="token class-name" style="color:#d8a657">PDOException</span><span class="token plain"> </span><span class="token variable" style="color:#ea6962">$e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain">    </span><span class="token keyword" style="color:#ea6962">return</span><span class="token plain"> </span><span class="token constant" style="color:#d8a657">null</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment" style="color:#a89984">// -&gt; Error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ebdbb2"><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Etiquetas:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs/tags/php">PHP</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs/tags/sq-lite">SQLite</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Última actualización<!-- --> en <b><time datetime="2025-11-15T03:51:37.000Z" itemprop="dateModified">15 nov 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Página del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/php/variables"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Variables</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#crear-base-de-datos" class="table-of-contents__link toc-highlight">Crear base de datos</a></li><li><a href="#patrón-singleton" class="table-of-contents__link toc-highlight">Patrón Singleton</a></li><li><a href="#métodos-útiles" class="table-of-contents__link toc-highlight">Métodos Útiles</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Apuntes Importantes</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Bunker de Notas</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/christian-herrera" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/chriissrp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://instagram.com/chris1496.rp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://ar.linkedin.com/in/christian-herrera-ing" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Apuntes, Christian Herrera</div></div></div></footer></div>
</body>
</html>